{"version":3,"file":"static/js/2.chunk.js","sources":["/Users/naruto/Desktop/mycode/study-notes/src/views/admin/article/edit/index.less","/Users/naruto/Desktop/mycode/study-notes/src/views/admin/article/edit/components/Cate.jsx","/Users/naruto/Desktop/mycode/study-notes/src/views/admin/article/edit/components/SelfCate.jsx","/Users/naruto/Desktop/mycode/study-notes/src/views/admin/article/edit/index.jsx","webpack:///./src/views/admin/article/edit/index.less?6dc2","/Users/naruto/Desktop/mycode/study-notes/ignored /Users/naruto/Desktop/mycode/study-notes/node_modules/_typo-js@1.0.3@typo-js fs"],"sourcesContent":["exports = module.exports = require(\"../../../../../node_modules/_css-loader@1.0.0@css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".blog-formItem {\\n  line-height: 36px;\\n}\\n.blog-formItem .label {\\n  display: inline-block;\\n  width: 80px;\\n  text-align: right;\\n  padding-right: 5px;\\n  text-transform: capitalize;\\n  font-weight: bold;\\n}\\n.blog-formItem .title-input {\\n  display: inline-block;\\n  width: calc(100% - 80px);\\n}\\n.CodeMirror-scroll {\\n  min-height: 500px;\\n}\\n\", \"\"]);\n\n// exports\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Tag } from 'antd'\n\nimport SelfCate from './SelfCate'\n\nconst CheckableTag = Tag.CheckableTag\n\n/**\n * 选择分类、标签的组件\n *\n * @class SelectCates\n * @extends {Component}\n */\n@connect(store => store.article)\nclass SelectCates extends Component {\n  constructor(props) {\n    super(props)\n    const { type, showNum } = this.props\n\n    let selectList\n\n    if (!this.props.isEdit) {\n      this.CommonlyList = this.getCommonlyList(this.props[`${type}List`], showNum)\n      selectList = this.CommonlyList[0] ? [this.CommonlyList[0]] : [] // 默认选中第一个  selectList = this.props.list\n    }\n\n    this.state = { selectList }\n  }\n\n  static propTypes = {\n    type: PropTypes.string.isRequired,\n    showNum: PropTypes.number,\n    list: PropTypes.array,\n    isEdit: PropTypes.bool\n  }\n\n  static defaultProps = {\n    type: 'tags',\n    showNum: 10\n  }\n\n  /**\n   * 获取常用的分类、标签列表\n   *\n   * @param {Array} list - 列表数据\n   * @param {Number} num - 获取的数量\n   */\n  getCommonlyList = (list, num = 10) => {\n    const sortList = list.sort((a, b) => b.count - a.count).map(d => d.name)\n    return sortList.slice(0, num)\n  }\n\n  // 行点击选中事件\n  handleSelect = (value, checked) => {\n    const { selectList } = this.state\n    const nextSelectList = checked ? [...selectList, value] : selectList.filter(t => t !== value)\n    this.setState({ selectList: nextSelectList })\n  }\n\n  // 获取最终结构\n  getResult = () => {\n    const { selectList } = this.state\n    const selfList = this.$selfCateRef.state.list\n    return [...selectList, ...selfList]\n  }\n\n  componentDidMount() {\n    this.props.onRef && this.props.onRef(this)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.list !== nextProps.list && nextProps.isEdit) {\n      this.setState({ selectList: nextProps.list })\n    }\n  }\n\n  render() {\n    const { selectList } = this.state\n    const { type, isEdit } = this.props\n    return (\n      <div className=\"blog-formItem\">\n        <span className=\"label\">{type}: </span>\n\n        {isEdit\n          ? this.props.list.map((item, i) => (\n              <CheckableTag\n                key={item}\n                checked={selectList.includes(item)}\n                onChange={checked => this.handleSelect(item, checked)}>\n                {item}\n              </CheckableTag>\n            ))\n          : this.CommonlyList.map((item, i) => (\n              <CheckableTag\n                key={item}\n                checked={selectList.includes(item)}\n                onChange={checked => this.handleSelect(item, checked)}>\n                {item}\n              </CheckableTag>\n            ))}\n        <SelfCate CommonlyList={this.props.list} ref={el => (this.$selfCateRef = el)} />\n      </div>\n    )\n  }\n}\n\nexport default SelectCates\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { Input, Tooltip, Icon, Tag } from 'antd'\n\nclass SeleCate extends Component {\n  static propTypes = {\n    CommonlyList: PropTypes.array.isRequired\n  }\n\n  state = {\n    list: [],\n    inputVisible: false,\n    inputValue: ''\n  }\n\n  handleClose = removedTag => {\n    const list = this.state.list.filter(t => t !== removedTag)\n    this.setState({ list })\n  }\n\n  showInput = () => {\n    this.setState({ inputVisible: true }, () => this.input.focus())\n  }\n\n  handleInputChange = e => {\n    this.setState({ inputValue: e.target.value })\n  }\n\n  handleInputConfirm = () => {\n    let { inputValue, list } = this.state\n    const CommonlyList = this.props.CommonlyList\n\n    if (inputValue && !list.includes(inputValue) && !CommonlyList.includes(inputValue)) {\n      list = [...list, inputValue]\n    }\n    this.setState({\n      list,\n      inputVisible: false,\n      inputValue: ''\n    })\n  }\n\n  saveInputRef = input => (this.input = input)\n\n  render() {\n    const { list, inputVisible, inputValue } = this.state\n    return (\n      <Fragment>\n        {list.map((item, index) => {\n          const isLongTag = item.length > 20\n          const tagElem = (\n            <Tag key={item} closable afterClose={() => this.handleClose(item)} color=\"#1890ff\">\n              {isLongTag ? `${item.slice(0, 20)}...` : item}\n            </Tag>\n          )\n          return isLongTag ? (\n            <Tooltip title={item} key={item}>\n              {tagElem}\n            </Tooltip>\n          ) : (\n            tagElem\n          )\n        })}\n\n        {inputVisible && (\n          <Input\n            ref={this.saveInputRef}\n            type=\"text\"\n            size=\"small\"\n            style={{ width: 78 }}\n            value={inputValue}\n            onChange={this.handleInputChange}\n            onBlur={this.handleInputConfirm}\n            onPressEnter={this.handleInputConfirm}\n          />\n        )}\n\n        {!inputVisible && (\n          <Tag onClick={this.showInput} style={{ background: '#fff', borderStyle: 'dashed' }}>\n            <Icon type=\"plus\" /> New Tag\n          </Tag>\n        )}\n      </Fragment>\n    )\n  }\n}\n\nexport default SeleCate\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport SimpleMDE from 'simplemde'\nimport 'simplemde/dist/simplemde.min.css'\nimport './index.less'\nimport { translateMarkdown } from '@/lib/index'\n\nimport { Button, Input, Modal, BackTop } from 'antd'\nimport SelectCate from './components/Cate'\n\n@connect(state => state.article)\nclass Edit extends Component {\n  state = {\n    value: '',\n    title: '',\n    tagList: [],\n    categoryList: [],\n    isEdit: false // 组件状态 更新或创建\n  }\n\n  componentDidMount() {\n    this.smde = new SimpleMDE({\n      element: document.getElementById('editor').childElementCount,\n      autofocus: true,\n      autosave: true,\n      previewRender: translateMarkdown\n    })\n\n    if (this.props.history.location.state) {\n      const { articleId } = this.props.history.location.state\n      this.axios.get(`/article/get/${articleId}`).then(res => {\n        const { title, tags, categories, content } = res.data\n        this.smde.value(content)\n        const tagList = tags.map(d => d.name)\n        const categoryList = categories.map(d => d.name)\n        this.setState({ title, tagList, categoryList, isEdit: true, articleId })\n      })\n    }\n  }\n\n  /**\n   * 获取常用的分类、标签列表\n   *\n   * @param {Array} list - 列表数据\n   * @param {Number} num - 获取的数量\n   */\n  getCommonlyList = (list, num = 10) => {\n    const sortList = list.sort((a, b) => b.count - a.count)\n    return sortList.slice(0, num)\n  }\n\n  handleSubmit = () => {\n    const tags = this.$tagRef.getResult()\n    const categories = this.$categoryRef.getResult()\n    let params = {\n      title: this.state.title,\n      content: this.smde.value(),\n      categories,\n      tags\n    }\n    if (this.state.isEdit) {\n      this.axios.put('/article/update', { ...params, articleId: this.state.articleId }).then(res => {\n        Modal.confirm({\n          title: '文章修改成功！是否查看详情？',\n          onOk: () => this.props.history.push(`/article/${this.state.articleId}`)\n        })\n      })\n    } else {\n      this.axios.post('/article/create', params).then(res => {\n        Modal.confirm({\n          title: '文章创建成功！是否立即查看？',\n          onOk: () => this.props.history.push(`/article/${res.data.id}`)\n        })\n      })\n    }\n  }\n\n  handleUpdate = () => {}\n\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value })\n  }\n\n  render() {\n    const { title, value, categoryList, tagList, isEdit } = this.state\n    return (\n      <div className=\"edit\">\n        <div className=\"blog-formItem\">\n          <span className=\"label\">标题：</span>\n          <Input\n            placeholder=\"请输入文章标题\"\n            className=\"title-input\"\n            name=\"title\"\n            value={title}\n            onChange={this.handleChange}\n          />\n        </div>\n        <SelectCate\n          type=\"category\"\n          showNum={10}\n          onRef={el => (this.$categoryRef = el)}\n          list={categoryList}\n          isEdit={isEdit}\n        />\n        <SelectCate\n          type=\"tag\"\n          showNum={12}\n          onRef={el => (this.$tagRef = el)}\n          list={tagList}\n          isEdit={isEdit}\n        />\n        <br />\n        <textarea id=\"editor\" defaultValue={value} />\n        <Button onClick={this.handleSubmit} type=\"primary\">\n          {isEdit ? '更新' : '创建'}\n        </Button>\n        <BackTop />\n      </div>\n    )\n  }\n}\n\nexport default Edit\n","\nvar content = require(\"!!../../../../../node_modules/_css-loader@1.0.0@css-loader/index.js??ref--6-oneOf-3-1!../../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??postcss!../../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--6-oneOf-3-3!./index.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/_style-loader@0.23.0@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/_css-loader@1.0.0@css-loader/index.js??ref--6-oneOf-3-1!../../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??postcss!../../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--6-oneOf-3-3!./index.less\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/_css-loader@1.0.0@css-loader/index.js??ref--6-oneOf-3-1!../../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??postcss!../../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--6-oneOf-3-3!./index.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/* (ignored) */"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPA;AAEA;AAGA;AAEA;AAEA;;;;;;;AAOA;AADA;AAAA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAgCA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AApCA;AAsCA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AA3CA;AA6CA;AAEA;AACA;AACA;AACA;AAlDA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAXA;AAYA;AACA;;;AAsCA;AACA;AACA;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AAGA;AAEA;AACA;AACA;AAAA;AAAA;AAHA;AADA;AAQA;AAEA;AACA;AACA;AAAA;AAAA;AAHA;AADA;AAQA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AAzFA;AAuBA;AACA;AAGA;;;;;;;AALA;AAsEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5GA;AACA;AAIA;;;;;;;;;;;;;;;;;AAKA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AAAA;AACA;;;;;;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAEA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAMA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AARA;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAKA;;;;AAhFA;AACA;AAkFA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxFA;AACA;AAEA;AACA;AACA;AACA;AAGA;AAGA;AADA;AAAA;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AAiCA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AACA;AAKA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AA9DA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;;;;;;;;;AA2CA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AASA;AACA;AACA;AAAA;AAAA;AACA;AACA;AALA;AAQA;AACA;AACA;AAAA;AAAA;AACA;AACA;AALA;AAQA;AAAA;AAAA;AACA;AAAA;AAAA;AAMA;;;;AA5GA;AA+GA;;;;;;;;;;;AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC5CA;;;;A","sourceRoot":""}